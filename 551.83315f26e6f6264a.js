"use strict";(self.webpackChunkDatHangAngular=self.webpackChunkDatHangAngular||[]).push([[551],{5551:(wt,w,r)=>{r.r(w),r.d(w,{HighlightNewsModule:()=>Ct});var s=r(6895),_=r(7486),m=r(4505),t=r(4650),p=r(5849),h=r(7455),x=r(8735),M=r(9717),v=r(859),f=r(805),T=r(666),y=r(1740),b=r(3054),S=r(7188),O=r(5593),d=r(4006);function $(o,c){if(1&o){const n=t.EpF();t.ynx(0)(1),t.TgZ(2,"app-image-select",14),t.NdJ("imageOutput",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)}),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"textarea",15),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()()}if(2&o){const n=t.oxw(2).$implicit,e=t.oxw();t.xp6(4),t.Q6J("autoResize",!1)("ngModel",e.output[n.field])}}function k(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"textarea",16),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw(2).$implicit,e=t.oxw();t.xp6(1),t.Q6J("autoResize",!0)("ngModel",e.output[n.field])}}function F(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"input",17),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw(2).$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.output[n.field])}}function P(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"p-inputNumber",18),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw(2).$implicit,e=t.oxw();let i;t.xp6(1),t.Q6J("minFractionDigits",0)("maxFractionDigits",5)("inputStyleClass",null!==(i=n.className)&&void 0!==i?i:"input-number")("ngModel",e.output[n.field])}}const I=function(){return[]};function Y(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"p-dropdown",19),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("onChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i.value))}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw(2).$implicit,e=t.oxw();let i;t.xp6(1),t.Q6J("filter",!n.filter.noFilterOnRow)("options",null!==(i=n.filter.dropdownOptions)&&void 0!==i?i:t.DdM(6,I))("showClear",!1)("readonly",!1)("placeholder","Ch\u1ecdn "+n.name)("ngModel",e.output[n.field])}}function D(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"textarea",21),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw(3).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(n);const a=t.oxw(3).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA()}if(2&o){const n=t.oxw(3).$implicit,e=t.oxw();t.Q6J("ngModel",e.output[n.field])}}function B(o,c){1&o&&(t.ynx(0),t.YNc(1,D,1,1,"ng-template",20),t.BQk())}function E(o,c){if(1&o&&(t.TgZ(0,"div",22),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).$implicit,e=t.oxw();t.xp6(1),t.hij(" ",e.output["tooltip_"+n.field]," ")}}function L(o,c){if(1&o&&(t.TgZ(0,"div",7)(1,"div",8),t._uU(2),t.qZA(),t.TgZ(3,"div",9),t.ynx(4,10),t.YNc(5,$,5,2,"ng-container",11),t.YNc(6,k,2,2,"ng-container",11),t.YNc(7,F,2,1,"ng-container",11),t.YNc(8,P,2,4,"ng-container",11),t.YNc(9,Y,2,7,"ng-container",11),t.YNc(10,B,2,0,"ng-container",12),t.BQk(),t.YNc(11,E,2,1,"div",13),t.qZA()()),2&o){const n=t.oxw().$implicit,e=t.oxw();t.xp6(2),t.hij(" ",n.name," "),t.xp6(2),t.Q6J("ngSwitch",n.type),t.xp6(1),t.Q6J("ngSwitchCase","image"),t.xp6(1),t.Q6J("ngSwitchCase","link"),t.xp6(1),t.Q6J("ngSwitchCase","string"),t.xp6(1),t.Q6J("ngSwitchCase","number"),t.xp6(1),t.Q6J("ngSwitchCase","dropdown"),t.xp6(2),t.Q6J("ngIf",e.output["tooltip_"+n.field])}}function j(o,c){if(1&o&&(t.ynx(0),t.YNc(1,L,12,8,"div",6),t.BQk()),2&o){const n=c.$implicit;t.xp6(1),t.Q6J("ngIf","updated"!==n.field&&"created"!==n.field)}}let U=(()=>{class o{constructor(n,e,i,a,l){this.dialogService=n,this.ref=e,this.firebaseService=i,this.toastService=a,this.commonService=l,this.output={},this.IMG_DEFAULT=m.jC,this.data=this.dialogService.data.data}ngOnInit(){}changeValue(n,e){this.output[n.field]=e,this.output.updated=Date.now(),console.log(n,e),console.log("output",this.output),this.output=JSON.parse(JSON.stringify(this.output))}submit(){console.log("Submit",this.output),this.dialogService.data.callBackAdded(this.output)}close(){this.ref.close()}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(p.S),t.Y36(p.E7),t.Y36(h.O),t.Y36(x.k),t.Y36(M.v))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-modal"]],decls:6,vars:1,consts:[[1,"wrap-modal"],[1,"wrap-input"],[4,"ngFor","ngForOf"],[1,"d-flex","aligin-items-center","justify-content-end","actions-wrap","mt-4"],["label","Cancel","styleClass","mx-2 p-button-outlined  p-button-secondary","icon","pi pi-times",3,"onClick"],["label","Add","styleClass","p-button-success","icon","pi pi-plus",3,"onClick"],["class","d-flex justify-content-between my-2",4,"ngIf"],[1,"d-flex","justify-content-between","my-2"],[1,"label"],[1,"value-input"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","mt-2 message text-info",4,"ngIf"],[3,"imageOutput"],["placeholder","Image link","cols","25","pInputTextarea","",3,"autoResize","ngModel","ngModelChange"],["cols","25","pInputTextarea","",3,"autoResize","ngModel","ngModelChange"],["pInputText","",3,"ngModel","ngModelChange"],["mode","decimal",3,"minFractionDigits","maxFractionDigits","inputStyleClass","ngModel","ngModelChange"],["id","value","optionLabel","name","optionValue","value",3,"filter","options","showClear","readonly","placeholder","ngModel","ngModelChange","onChange"],["pTemplate","input"],["pInputTextarea","",3,"ngModel","ngModelChange"],[1,"mt-2","message","text-info"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,j,2,1,"ng-container",2),t.qZA(),t.TgZ(3,"div",3)(4,"p-button",4),t.NdJ("onClick",function(){return i.close()}),t.qZA(),t.TgZ(5,"p-button",5),t.NdJ("onClick",function(){return i.submit()}),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",i.data))},dependencies:[s.sg,s.O5,s.RF,s.n9,s.ED,v.Y,f.jx,T.Lt,y.o,b.g,S.Rn,O.zx,d.Fj,d.JJ,d.On],styles:[".wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message{white-space:pre-line;font-size:.8rem}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}@media (max-width: 700px){.wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input textarea, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber>span, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}}"]})}return o})();var G=r(1989),N=r(2174);function K(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"th",8)(2,"div",9),t._uU(3),t.qZA()(),t.BQk()),2&o){const n=c.$implicit;t.xp6(1),t.Q6J("ngClass",n.headerClassName)("ngStyle",n.styles),t.xp6(2),t.hij(" ",n.name," ")}}function R(o,c){if(1&o&&(t.ynx(0),t._UZ(1,"img",17,18),t.BQk()),2&o){const n=t.oxw().$implicit,e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("src",e[n.field]||i.IMG_DEFAULT,t.LSH)}}function z(o,c){if(1&o&&(t.ynx(0),t._UZ(1,"div",19),t.BQk()),2&o){const n=t.oxw().$implicit,e=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("innerHTML",i.renderLink(e[n.field]),t.oJD)}}function V(o,c){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw().$implicit,e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e[n.field]," ")}}function W(o,c){if(1&o&&(t.ynx(0),t._uU(1),t.ALo(2,"number"),t.BQk()),2&o){const n=t.oxw().$implicit,e=t.oxw().$implicit;t.xp6(1),t.hij(" ",0==+e[n.field]?"-":t.lcZ(2,1,+e[n.field])," ")}}const J=function(){return[]};function X(o,c){if(1&o&&(t.ynx(0),t._UZ(1,"p-dropdown",20),t.BQk()),2&o){const n=t.oxw().$implicit,e=t.oxw().$implicit;let i;t.xp6(1),t.Q6J("options",null!==(i=n.filter.dropdownOptions)&&void 0!==i?i:t.DdM(6,J))("showClear",!1)("ngModel",e[n.field])("readonly",!0)("ngStyle",n.styles)("styleClass","bg-light")}}function q(o,c){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const n=t.oxw().$implicit,e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e[n.field]," ")}}function tt(o,c){if(1&o&&(t.TgZ(0,"td",12)(1,"div",13),t.ynx(2,14),t.YNc(3,R,3,1,"ng-container",15),t.YNc(4,z,2,1,"ng-container",15),t.YNc(5,V,2,1,"ng-container",15),t.YNc(6,W,3,3,"ng-container",15),t.YNc(7,X,2,7,"ng-container",15),t.YNc(8,q,2,1,"ng-container",16),t.BQk(),t.qZA()()),2&o){const n=c.$implicit;t.Q6J("ngClass",n.className),t.xp6(1),t.Q6J("ngStyle",n.styles),t.xp6(1),t.Q6J("ngSwitch",n.type),t.xp6(1),t.Q6J("ngSwitchCase","image"),t.xp6(1),t.Q6J("ngSwitchCase","link"),t.xp6(1),t.Q6J("ngSwitchCase","string"),t.xp6(1),t.Q6J("ngSwitchCase","number"),t.xp6(1),t.Q6J("ngSwitchCase","dropdown")}}function nt(o,c){if(1&o&&(t.ynx(0),t.TgZ(1,"tr",10),t.YNc(2,tt,9,8,"td",11),t.qZA(),t.BQk()),2&o){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.previewHeader)}}function et(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"app-image-select",26),t.NdJ("imageOutput",function(i){t.CHM(n);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)}),t.qZA(),t.BQk()}}function it(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"textarea",27),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(n);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.Q6J("autoResize",!0)("ngModel",e.output[n.field])}}function ot(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"input",28),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(n);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.output[n.field])}}function at(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"p-inputNumber",29),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw().$implicit,e=t.oxw();let i;t.xp6(1),t.Q6J("minFractionDigits",0)("maxFractionDigits",5)("inputStyleClass",null!==(i=n.className)&&void 0!==i?i:"input-number")("ngModel",e.output[n.field])}}function lt(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"p-dropdown",30),t.NdJ("onChange",function(i){t.CHM(n);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i.value))}),t.qZA(),t.BQk()}if(2&o){const n=t.oxw().$implicit;let e;t.xp6(1),t.Q6J("options",null!==(e=n.filter.dropdownOptions)&&void 0!==e?e:t.DdM(3,J))("showClear",!1)("readonly",!1)}}function ct(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"textarea",32),t.NdJ("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.output[a.field]=i)})("ngModelChange",function(i){t.CHM(n);const a=t.oxw(2).$implicit,l=t.oxw();return t.KtG(l.changeValue(a,i))}),t.qZA()}if(2&o){const n=t.oxw(2).$implicit,e=t.oxw();t.Q6J("ngModel",e.output[n.field])}}function rt(o,c){1&o&&(t.ynx(0),t.YNc(1,ct,1,1,"ng-template",31),t.BQk())}function st(o,c){if(1&o&&(t.TgZ(0,"div",33),t._uU(1),t.qZA()),2&o){const n=t.oxw().$implicit,e=t.oxw();t.xp6(1),t.hij(" ",e.output["tooltip_"+n.field]," ")}}function dt(o,c){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",21)(2,"p-checkbox",22),t.NdJ("onChange",function(i){const l=t.CHM(n).$implicit,C=t.oxw();return t.KtG(C.checkedChange(i.checked,l.field))}),t.qZA(),t.TgZ(3,"div",23),t._uU(4),t.qZA(),t.TgZ(5,"div",24),t.NdJ("click",function(){const a=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.checkedChange(!0,a.field))}),t.ynx(6,14),t.YNc(7,et,2,0,"ng-container",15),t.YNc(8,it,2,2,"ng-container",15),t.YNc(9,ot,2,1,"ng-container",15),t.YNc(10,at,2,4,"ng-container",15),t.YNc(11,lt,2,4,"ng-container",15),t.YNc(12,rt,2,0,"ng-container",16),t.BQk(),t.YNc(13,st,2,1,"div",25),t.qZA()(),t.BQk()}if(2&o){const n=c.$implicit,e=t.oxw();t.xp6(2),t.Q6J("binary",!0)("ngModel",e.updateFields.get(n.field)),t.xp6(2),t.hij(" ",n.name," "),t.xp6(2),t.Q6J("ngSwitch",n.type),t.xp6(1),t.Q6J("ngSwitchCase","image"),t.xp6(1),t.Q6J("ngSwitchCase","link"),t.xp6(1),t.Q6J("ngSwitchCase","string"),t.xp6(1),t.Q6J("ngSwitchCase","number"),t.xp6(1),t.Q6J("ngSwitchCase","dropdown"),t.xp6(2),t.Q6J("ngIf",e.output["tooltip_"+n.field])}}let pt=(()=>{class o{constructor(n,e,i,a,l){this.dialogService=n,this.ref=e,this.firebaseService=i,this.toastService=a,this.commonService=l,this.previewHeader=[],this.willChangeHeader=[],this.items=[],this.output={},this.IMG_DEFAULT=m.jC,this.renderLink=m.KJ,this.updateFields=new Map,this.header=this.dialogService.data.data,this.items=this.dialogService.data.items;const C=["imageLink","customer","description","status"];this.previewHeader=this.header.filter(g=>C.includes(g.field));const Z=["imageLink","status","CNY_price","exchange","weight_price","orderID","customer","price","price2","weight"];Z.forEach(g=>{this.updateFields.set(g,!1)}),this.willChangeHeader=this.header.filter(g=>Z.includes(g.field))}ngOnInit(){this.output.status=0}changeValue(n,e){this.output[n.field]=e,console.log(n,e),console.log("output",this.output),this.output=JSON.parse(JSON.stringify(this.output))}submit(){const n={};let e=[],i=0;for(const a in this.output)Object.prototype.hasOwnProperty.call(this.output,a)&&this.updateFields.get(a)&&(n[a]=this.output[a],e.push(`[${a}]`),i++);this.output.imageLink||!this.updateFields.get("imageLink")?this.output.orderID||!this.updateFields.get("orderID")?this.output.customer||!this.updateFields.get("customer")?!isNaN(this.output.CNY_price)&&this.output.CNY_price||!this.updateFields.get("CNY_price")?!isNaN(this.output.price)&&this.output.price||!this.updateFields.get("price")?!isNaN(this.output.price2)&&this.output.price2||!this.updateFields.get("price2")?!isNaN(this.output.weight)&&this.output.weight||!this.updateFields.get("weight")?"{}"!==JSON.stringify(n)?(console.log({updateInfo:n}),this.dialogService.data.callBackUpdated(n,`C\u1eadp nh\u1eadt ${i} th\xf4ng tin  ${e.join(", ")} cho ${this.items.length} \u0111\u01a1n h\xe0ng.`)):this.toastService.showToastWarning("B\u1ea1n kh\xf4ng ch\u1ecdn tr\u01b0\u1eddng n\xe0o \u0111\u1ec3 c\u1eadp nh\u1eadt!"):this.toastService.showToastWarning("C\xe2n \u0111ang b\u1ecb b\u1ecf tr\u1ed1ng"):this.toastService.showToastWarning("Gi\xe1 b\xe1n \u0111ang b\u1ecb b\u1ecf tr\u1ed1ng"):this.toastService.showToastWarning("Gi\xe1 nh\u1eadp \u0111ang b\u1ecb b\u1ecf tr\u1ed1ng"):this.toastService.showToastWarning("T\u1ec7 \u0111ang b\u1ecb b\u1ecf tr\u1ed1ng"):this.toastService.showToastWarning("T\xean kh\xe1ch h\xe0ng \u0111ang tr\u1ed1ng"):this.toastService.showToastWarning("M\xe3 v\u1eadn \u0111\u01a1n \u0111ang tr\u1ed1ng"):this.toastService.showToastWarning("Ch\u01b0a ch\u1ecdn \u1ea3nh")}checkedChange(n,e){this.updateFields.set(e,n)}close(){this.ref.close()}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(p.S),t.Y36(p.E7),t.Y36(h.O),t.Y36(x.k),t.Y36(M.v))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-multi-handler-modal"]],decls:13,vars:4,consts:[[1,"wrap-modal"],[1,"table-preview"],[3,"header"],[4,"ngFor","ngForOf"],[1,"wrap-input"],[1,"d-flex","aligin-items-center","justify-content-end","actions-wrap","mt-4"],["label","Cancel","styleClass","mx-2 p-button-outlined  p-button-secondary","icon","pi pi-times",3,"onClick"],["label","Updated","styleClass","p-button-danger","icon","pi pi-pencil",3,"onClick"],[1,"table-header",3,"ngClass","ngStyle"],[1,"flex","align-items-center"],[1,"p-selectable-row"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"table-cell",3,"ngStyle"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["width","100",1,"cursor-pointer",3,"src"],["image",""],[3,"innerHTML"],["id","value","optionLabel","name","optionValue","value",3,"options","showClear","ngModel","readonly","ngStyle","styleClass"],[1,"d-flex","justify-content-between","my-2","align-items-center"],[3,"binary","ngModel","onChange"],[1,"label","ml-2"],[1,"value-input",3,"click"],["class","mt-2 message text-info",4,"ngIf"],[3,"imageOutput"],["cols","25","pInputTextarea","",3,"autoResize","ngModel","ngModelChange"],["pInputText","",3,"ngModel","ngModelChange"],["mode","decimal",3,"minFractionDigits","maxFractionDigits","inputStyleClass","ngModel","ngModelChange"],["id","value","optionLabel","name","optionValue","value",3,"options","showClear","readonly","onChange"],["pTemplate","input"],["pInputTextarea","",3,"ngModel","ngModelChange"],[1,"mt-2","message","text-info"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-accordion")(3,"p-accordionTab",2)(4,"table")(5,"tr"),t.YNc(6,K,4,3,"ng-container",3),t.qZA(),t.YNc(7,nt,3,1,"ng-container",3),t.qZA()()()(),t.TgZ(8,"div",4),t.YNc(9,dt,14,10,"ng-container",3),t.qZA(),t.TgZ(10,"div",5)(11,"p-button",6),t.NdJ("onClick",function(){return i.close()}),t.qZA(),t.TgZ(12,"p-button",7),t.NdJ("onClick",function(){return i.submit()}),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("header",i.items.length+" \u0111\u01a1n h\xe0ng s\u1ebd \u0111\u01b0\u1ee3c update!"),t.xp6(3),t.Q6J("ngForOf",i.previewHeader),t.xp6(1),t.Q6J("ngForOf",i.items),t.xp6(2),t.Q6J("ngForOf",i.willChangeHeader))},dependencies:[s.mk,s.sg,s.O5,s.PC,s.RF,s.n9,s.ED,v.Y,f.jx,T.Lt,y.o,b.g,S.Rn,O.zx,G.XZ,N.UQ,N.US,d.Fj,d.JJ,d.On,s.JJ],styles:[".wrap-modal[_ngcontent-%COMP%]     .table-preview{max-width:700px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message{white-space:pre-line;font-size:.8rem}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}@media (max-width: 700px){.wrap-modal[_ngcontent-%COMP%]     .table-preview{display:none}.wrap-modal[_ngcontent-%COMP%]     .wrap-input{display:grid;grid-template-columns:auto;gap:10px 60px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .label{width:100px}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input{flex:1}.wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .input-number, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input textarea, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input p-inputnumber>span, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input .message, .wrap-modal[_ngcontent-%COMP%]     .wrap-input .value-input input{width:100%}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap{text-align:right}.wrap-modal[_ngcontent-%COMP%]     .actions-wrap button{width:120px}}"]})}return o})();var gt=r(7579),u=r(2722),A=r(262),H=r(9646),Q=r(8746),ut=r(7435),_t=r(7963);let mt=(()=>{class o{constructor(n,e,i,a){this.toastService=n,this.dialogService=e,this.firebaseService=i,this.confirmationService=a,this.headers=[],this.orders=[],this.selectedItems=[],this.isLoading=!0,this.$destroy=new gt.x}ngOnInit(){this.getActionsMenu(),this.getTableHeader(),this.getData()}valueChanged(n){console.log(n);const e={[n.header.field]:n.value},i=()=>{this.firebaseService.fbUpdateProduct(e,n?.item?._id||"").pipe((0,u.R)(this.$destroy),(0,A.K)(a=>(console.error("updateFunc err",a),(0,H.of)(null)))).subscribe(()=>{this.toastService.add({severity:"success",summary:`Updated [${n.item.title}]`,detail:`[${n.header.name}] = ${n.value}`}),this.getData()})};"number"===n.header.type&&"price"!==n.header.field&&"price2"!==n.header.field?this.confirmationService.confirm({message:"T\u1ef1 \u0111\u1ed9ng t\xednh gi\xe1 b\xe1n, gi\xe1 nh\u1eadp?",header:"Update confirmation",icon:"pi pi-info-circle",rejectButtonStyleClass:"bg-danger",accept:()=>{i()},reject:()=>{i()}}):i()}showAddModal(){this.ref=this.dialogService.open(U,{header:"\u0110\u01a1n h\xe0ng m\u1edbi",contentStyle:{overflow:"auto"},maximizable:!0,baseZIndex:1e4,data:{data:this.headers,callBackAdded:n=>{this.addItem(n)}}})}contextMenuClick(n){switch(console.log(n),n.type){case _.MW.DELETE_ACCEPT:this.firebaseService.fbDeleteRealProduct(n.value._id).subscribe(()=>{this.toastService.showToastSuccess(`Deleted record: ${n.value.title}`),this.getData()});break;case _.MW.DELETE_REJECT_CANCEL:break;case _.MW.CLONE_A_COPY:this.addItem(n.value)}}selectMultiItems(n){this.ref=this.dialogService.open(pt,{header:"C\u1eadp nh\u1eadt nhi\u1ec1u \u0111\u01a1n h\xe0ng c\xf9ng l\xfac!",contentStyle:{overflow:"auto"},maximizable:!0,baseZIndex:1e4,data:{items:n,data:this.headers,callBackUpdated:(e,i)=>{console.log({output:e}),this.confirmationService.confirm({message:i,header:"Update Confirmation",icon:"pi pi-info-circle",rejectButtonStyleClass:"bg-danger",accept:()=>{this.updateItem(e,n,i)},reject:()=>{}})}}})}getTableHeader(){this.headers=[{name:"Image",field:"imageLink",type:"image",className:"image-col",filter:{noFilter:!0},styles:{"min-width":"150px","max-width":"150px",width:"150px"}},{name:"Ti\xeau \u0111\u1ec1",field:"title",type:"string",filter:{},styles:{"min-width":"20%",width:"300px"}},{name:"N\u1ed9i dung ng\u1eafn",field:"content",type:"string",filter:{},styles:{wordBreak:"break-all",width:"100%","min-width":"100px"}},{name:"Link",field:"link",type:"string",filter:{},styles:{wordBreak:"break-all",width:"250px","min-width":"100px"}},{name:"Ng\xe0y c\u1eadp nh\u1eadt",field:"updated",type:"string",filter:{},styles:{"min-width":"250px"}},{name:"Ng\xe0y t\u1ea1o",field:"created",type:"string",filter:{},styles:{"min-width":"250px"}}]}getActionsMenu(){this.actionMenuItems=[{icon:"pi pi-trash",tooltip:"X\xf3a c\xe1c d\xf2ng \u0111\xe3 ch\u1ecdn",command:()=>{this.selectedItems.length?this.confirmationService.confirm({message:`X\xf3a ${this.selectedItems.length} \u0111\u01a1n h\xe0ng \u0111ang ch\u1ecdn?`,header:"Delete Confirmation",icon:"pi pi-info-circle",acceptButtonStyleClass:"bg-danger",rejectButtonStyleClass:"bg-success",defaultFocus:"reject",accept:()=>{this.firebaseService.fbDeleteRealProducts(this.selectedItems).subscribe(n=>{this.toastService.showToastSuccess(`X\xf3a ${this.selectedItems.length} \u0111\u01a1n h\xe0ng th\xe0nh c\xf4ng!`),this.getData()})},reject:()=>{}}):this.toastService.showToastWarning("H\xe3y ch\u1ecdn \xedt nh\u1ea5t 1 \u0111\u01a1n h\xe0ng \u0111\u1ec3 x\xf3a!")}},{icon:"pi pi-external-link",command:()=>{this.selectedItems.length?this.selectMultiItems(this.selectedItems):this.toastService.showToastWarning("H\xe3y ch\u1ecdn \xedt nh\u1ea5t 1 \u0111\u01a1n h\xe0ng \u0111\u1ec3 update!")}},{icon:"pi pi-plus",command:()=>{this.showAddModal()}}]}getData(){this.isLoading=!0,this.selectedItems=[],this.orders=[],this.firebaseService.fbQueryProducts().pipe((0,u.R)(this.$destroy),(0,Q.x)(()=>this.isLoading=!1)).subscribe(n=>{console.log(n),n.sort((e,i)=>e.created<i.created?1:-1),this.orders=n})}addItem(n){this.firebaseService.fbAddProducts(n).pipe((0,u.R)(this.$destroy)).subscribe(e=>{console.log("added",e),this.toastService.showToastSuccess(`Added new order ${n.title} successfully!`),this.getData()})}updateItem(n,e,i){this.isLoading=!0,this.firebaseService.fbUpdateProducts(n,e).pipe((0,u.R)(this.$destroy),(0,A.K)(a=>(console.error("fbUpdateProducts err",a),(0,H.of)(null))),(0,Q.x)(()=>this.isLoading=!1)).subscribe(a=>{this.toastService.showToastSuccess(`${i} successfully!`),this.ref.close(),this.getData()})}ngOnDestroy(){this.$destroy.next(),this.$destroy.complete(),this.ref&&this.ref.close()}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(x.k),t.Y36(p.xA),t.Y36(h.O),t.Y36(f.YP))};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-facebook"]],decls:3,vars:6,consts:[[3,"headers","dataTable","selectedItems","isLoading","valueChanged","contextMenuOutput","selectMultiItems"],[1,"flat-button-add"],[3,"model","hideOnClickOutside"]],template:function(e,i){1&e&&(t.TgZ(0,"highlight-news-table",0),t.NdJ("valueChanged",function(l){return i.valueChanged(l)})("contextMenuOutput",function(l){return i.contextMenuClick(l)})("selectMultiItems",function(l){return i.selectedItems=l}),t.qZA(),t.TgZ(1,"div",1),t._UZ(2,"p-speedDial",2),t.qZA()),2&e&&(t.Q6J("headers",i.headers)("dataTable",i.orders)("selectedItems",i.selectedItems)("isLoading",i.isLoading),t.xp6(2),t.Q6J("model",i.actionMenuItems)("hideOnClickOutside",!1))},dependencies:[ut.C,_t.V],styles:["facebook-table .image-col img{width:100px}[_nghost-%COMP%]     .flat-button-add{position:fixed;bottom:320px;right:80px}[_nghost-%COMP%]     .flat-button-add .p-speeddial-action{text-decoration:none}"]})}return o})();var ht=r(923),xt=r(65);const ft=[{path:"",component:mt}];let Ct=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#n=this.\u0275mod=t.oAB({type:o});static#e=this.\u0275inj=t.cJS({providers:[p.xA],imports:[s.ez,ht.Bz.forChild(ft),xt.m,d.UX,d.u5]})}return o})()}}]);